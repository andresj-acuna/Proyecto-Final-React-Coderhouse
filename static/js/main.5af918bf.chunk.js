(this["webpackJsonpeindhoven-e-commerce"]=this["webpackJsonpeindhoven-e-commerce"]||[]).push([[0],{121:function(e,t,c){},123:function(e,t,c){},131:function(e,t,c){},132:function(e,t,c){},138:function(e,t,c){},139:function(e,t,c){},140:function(e,t,c){},141:function(e,t,c){},143:function(e,t,c){},144:function(e,t,c){},145:function(e,t,c){},147:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),s=c(45),i=c.n(s),r=(c(121),c(13)),l=c(14),o=c(12),j=c(2),d=Object(a.createContext)([{}]),m=function(e){var t=e.children,c=function(){return null!==localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]},n=function(){return null!==localStorage.getItem("my-orders")?JSON.parse(localStorage.getItem("my-orders")):[]},s=Object(a.useState)(c),i=Object(o.a)(s,2),r=i[0],m=i[1],b=Object(a.useState)(0),u=Object(o.a)(b,2),O=u[0],h=u[1],x=Object(a.useState)(0),f=Object(o.a)(x,2),p=f[0],g=f[1],v=Object(a.useState)(n),N=Object(o.a)(v,2),y=N[0],C=N[1];Object(a.useEffect)((function(){I(),localStorage.setItem("cart",JSON.stringify(r)),console.log(r),localStorage.setItem("my-orders",JSON.stringify(y)),S()}));var I=function(){var e=r.reduce((function(e,t){return e+t.quantity}),0);h(e)},S=function(){var e=r.reduce((function(e,t){return e+t.price*t.quantity}),0);g(e)};return Object(j.jsx)(d.Provider,{value:{addToCart:function(e){var t=r.find((function(t){return t.item===e.item}));if(void 0!==t){var c=r.findIndex((function(t){return t.item===e.item}));r.splice(c,1,{item:e.item,quantity:e.quantity+t.quantity,price:e.price,imageUrl:e.imageUrl,id:e.id,stock:e.stock})}else m([].concat(Object(l.a)(r),[{item:e.item,quantity:e.quantity,price:e.price,imageUrl:e.imageUrl,id:e.id,stock:e.stock}]))},isInCart:function(e){return r.find((function(t){return t.item===e}))},cart:r,setCart:m,items:O,updateItems:I,total:p,deleteItem:function(e){var t=r.filter((function(t){return t.item!==e}));m(t),localStorage.setItem("cart",JSON.stringify(t))},orderIds:y,setOrderIds:C,itemsInLocal:c,ordersInLocal:n},children:t})},b=(c(123),function(e){var t=Object(a.useContext)(d).items;return Object(j.jsx)(j.Fragment,{children:t>0?Object(j.jsxs)("div",{className:"carrito",children:[Object(j.jsx)(r.b,{to:"/cart",children:Object(j.jsx)("i",{className:"shopping cart icon"})}),t>0&&Object(j.jsx)("span",{children:t})]}):null})}),u=(c(131),function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"header",children:Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsx)("div",{className:"header-content",children:Object(j.jsxs)("nav",{className:"navbar",children:[Object(j.jsx)("div",{className:"navbar-header",children:Object(j.jsx)(r.b,{className:"navbar-brand",to:"/",children:"Eindhoven"})}),Object(j.jsxs)("div",{className:"menu-carrito",children:[Object(j.jsxs)("ul",{className:"menu",children:[Object(j.jsx)("li",{children:Object(j.jsx)(r.b,{to:"/",children:"Home"})}),Object(j.jsx)("li",{children:Object(j.jsx)(r.b,{to:"/categories/cellphones",children:"Celulares"})}),Object(j.jsx)("li",{children:Object(j.jsx)(r.b,{to:"/categories/tv",children:"Televisores"})}),Object(j.jsx)("li",{children:Object(j.jsx)(r.b,{to:"/categories/videogames",children:"Gaming"})}),Object(j.jsx)("li",{children:Object(j.jsx)(r.b,{to:"/my-orders",children:"Mis compras"})})]}),Object(j.jsx)(b,{})]})]})})})})})}),O=c(54),h=c(160),x=c(161),f=c(15),p=(c(132),c(164)),g=c(106),v=c(165),N=function(e){var t=e.item;console.log(t);var c=new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2});return Object(j.jsx)(j.Fragment,{children:t.map((function(e){return Object(j.jsxs)(p.a,{children:[Object(j.jsx)(g.a,{src:e.imageUrl,width:"5",wrapped:!0,ui:!1}),Object(j.jsxs)(p.a.Content,{children:[Object(j.jsx)(p.a.Header,{children:e.title}),Object(j.jsxs)(p.a.Description,{children:[Object(j.jsx)("p",{children:c.format(e.price)}),Object(j.jsx)(r.b,{to:"/detalle/".concat(e.id),children:Object(j.jsx)(v.a,{color:"teal",children:Object(j.jsx)("span",{children:"Detalles"})})})]})]})]},e.id)}))})},y=function(e){var t=e.items;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"card",children:Object(j.jsx)(N,{item:t})})})},C=c(71);c(136);C.a.initializeApp({apiKey:"AIzaSyBzZ5ZCzDzY89RAqo89WLcUj0QAwVOmsk8",authDomain:"eindhoven-coderhouse.firebaseapp.com",projectId:"eindhoven-coderhouse",storageBucket:"eindhoven-coderhouse.appspot.com",messagingSenderId:"1088849446908",appId:"1:1088849446908:web:4b5c69bded4408f77d9479"});var I=C.a.firestore(),S=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],s=Object(f.g)().category;return Object(a.useEffect)((function(){I.collection("items").get().then((function(e){var t=e.docs.map((function(e){return Object(O.a)({id:e.id},e.data())}));n(t)}))}),[]),c.length>0?void 0!==s?Object(j.jsx)(y,{items:c.filter((function(e){return e.category==="".concat(s)}))}):Object(j.jsx)(y,{items:c}):Object(j.jsx)(h.a,{className:"container-loader",children:Object(j.jsx)(x.a,{active:!0,inline:"centered",size:"large",children:"Cargando"})})},k=function(){return Object(j.jsx)(S,{})},w=(c(138),function(e){var t=e.stock,c=e.initial,n=e.item,s=e.addCart,i=Object(a.useState)(parseInt(c)),l=Object(o.a)(i,2),d=l[0],m=l[1],b=!1,u=!1,O=!1;return 0===t&&(O=!0),t<0&&(O=!0),1===d&&(b=!0),d===t&&(u=!0),Object(j.jsxs)(h.a,{children:[Object(j.jsx)("div",{className:"buttons-container",children:Object(j.jsxs)("div",{className:"all-buttons",children:[Object(j.jsx)("button",{disabled:b,onClick:function(e){d>1?m(d-1):console.log("El stock debe ser mayor a 1")},className:"minus-button",children:Object(j.jsx)("i",{className:"minus icon"})}),0===t||t<0?Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:"0"})}):Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:d})}),0===t?Object(j.jsx)("button",{disabled:O,className:"plus-button",children:Object(j.jsx)("i",{className:"plus icon"})}):Object(j.jsx)("button",{disabled:u,onClick:function(e){d<t?m(d+1):console.log("Ha superado el stock")},className:"plus-button",children:Object(j.jsx)("i",{className:"plus icon"})})]})}),Object(j.jsx)("div",{className:"cart-button",children:0===t||t<0?Object(j.jsx)(v.a,{color:"teal",disabled:O,className:"btn_Carrito",onClick:function(){return s(d,n)},children:Object(j.jsx)("div",{className:"center-btn-cart",children:Object(j.jsx)("i",{className:"shopping cart icon",children:Object(j.jsx)("span",{children:"Agregar"})})})}):Object(j.jsx)(r.b,{to:"/cart",children:Object(j.jsx)(v.a,{color:"teal",disabled:O,className:"btn_Carrito",onClick:function(){return s(d,n)},children:Object(j.jsx)("div",{className:"center-btn-cart",children:Object(j.jsx)("i",{className:"shopping cart icon",children:Object(j.jsx)("span",{children:"Agregar"})})})})})})]})}),F=c(162),A=c(167),q=(c(139),function(e){var t=e.item,c=new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2}),n=Object(a.useState)(1),s=Object(o.a)(n,2),i=s[0],r=s[1],l=Object(a.useContext)(d);return console.log(t.stock),Object(j.jsxs)(F.a,{className:"item-container",children:[Object(j.jsx)(F.a.Image,{src:t.imageUrl,className:"item-image"}),Object(j.jsxs)(F.a.Content,{className:"item-content",children:[Object(j.jsx)(F.a.Header,{className:"item-title",children:Object(j.jsx)("h2",{children:t.title})}),Object(j.jsx)(F.a.Extra,{children:Object(j.jsx)(A.a,{icon:"star",defaultRating:5,maxRating:5,clearable:!0})}),Object(j.jsx)(F.a.Header,{className:"item-price",children:Object(j.jsx)("h3",{children:c.format(t.price)})}),Object(j.jsx)(F.a.Description,{className:"item-description",children:Object(j.jsx)("p",{children:t.detail})}),Object(j.jsx)(F.a.Extra,{children:t.stock>0?Object(j.jsx)("div",{className:"tags",children:Object(j.jsx)("span",{className:"tag tag-stock",children:"En stock"})}):Object(j.jsxs)("div",{className:"tags",children:[Object(j.jsx)("span",{className:"tag tag-no-stock",children:"Sin stock"})," "]})}),Object(j.jsx)(w,{stock:t.stock,initial:i,item:t,addCart:function(e,t){l.addToCart({item:t.title,quantity:e,price:t.price,imageUrl:t.imageUrl,id:t.id,stock:t.stock}),r(e),l.updateItems()}})]})]})}),E=(c(140),function(e){var t=e.item;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(h.a,{className:"item-detail-container",children:Object(j.jsx)(h.a,{className:"itemDetail",children:Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsx)(h.a,{children:Object(j.jsx)(q,{item:t})})})},t.id)})})}),R=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],s=Object(f.g)().productID;return Object(a.useEffect)((function(){I.collection("items").doc(s).get().then((function(e){e.exists?n(Object(O.a)({id:e.id},e.data())):n("not exist")})).catch((function(e){return console.log(e)}))}),[s]),Object(j.jsx)(j.Fragment,{children:0===c.length?Object(j.jsx)(h.a,{className:"container-loader",children:Object(j.jsx)(x.a,{active:!0,inline:"centered",size:"large",children:"Cargando el producto"})}):Object(j.jsx)(E,{item:c})})},z=c(163),D=c(66),H=(c(141),function(e){e.item;var t=Object(a.useContext)(d),c=t.cart,n=t.total,s=t.deleteItem,i=new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2});return console.log(i.format(1e4)),Object(j.jsx)("div",{className:"cart-container",children:c.length>0?Object(j.jsxs)(z.a,{unstackable:!0,children:[Object(j.jsx)(z.a.Header,{children:Object(j.jsxs)(z.a.Row,{children:[Object(j.jsx)(z.a.HeaderCell,{children:"Producto"}),Object(j.jsx)(z.a.HeaderCell,{children:"Precio"}),Object(j.jsx)(z.a.HeaderCell,{className:"quantity",children:"Cantidad"}),Object(j.jsx)(z.a.HeaderCell,{children:"Total"}),Object(j.jsx)(z.a.HeaderCell,{children:"Eliminar"})]})}),c.map((function(e,t){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(z.a.Body,{children:[Object(j.jsxs)(z.a.Row,{children:[Object(j.jsx)(z.a.Cell,{clasName:"imgProduct",children:Object(j.jsxs)("div",{className:"product-table",children:[Object(j.jsx)("img",{src:e.imageUrl,alt:e.item,width:"100"}),Object(j.jsx)("p",{children:e.item})]})}),Object(j.jsx)(z.a.Cell,{children:i.format(e.price)}),Object(j.jsx)(z.a.Cell,{children:e.quantity}),Object(j.jsx)(z.a.Cell,{children:i.format(e.quantity*e.price)}),Object(j.jsx)(z.a.Cell,{children:Object(j.jsx)(D.a,{onClick:function(){return s(e.item)},link:!0,name:"close"})})]}),Object(j.jsx)(z.a.Row,{}),Object(j.jsx)(z.a.Row,{}),Object(j.jsx)(z.a.Row,{}),Object(j.jsx)(z.a.Row,{}),Object(j.jsx)(z.a.Row,{})]},t)})})),Object(j.jsxs)(z.a.Row,{children:[Object(j.jsx)(z.a.Cell,{}),Object(j.jsx)(z.a.Cell,{}),Object(j.jsx)(z.a.Cell,{}),Object(j.jsx)(z.a.Cell,{children:Object(j.jsxs)("h3",{children:[" Subtotal: ",Object(j.jsx)("span",{children:i.format(n)})]})}),Object(j.jsx)(z.a.Cell,{children:Object(j.jsx)(r.b,{to:"/order",children:Object(j.jsx)(v.a,{color:"teal",children:Object(j.jsx)("div",{className:"center-btn-cart",children:Object(j.jsx)("i",{className:"shopping cart icon",children:Object(j.jsx)("span",{children:"Agregar"})})})})})})]})]}):Object(j.jsxs)("div",{className:"cart-container",children:[Object(j.jsx)("h2",{className:"text-cart",children:"Tu carrito est\xe1 vac\xedo"}),Object(j.jsx)(r.b,{to:"/",className:"link-carrito",children:Object(j.jsx)(v.a,{className:"button-regresar",children:"Volver a la tienda"})})]})})}),U=(c(98),c(107)),T=(c(143),function(){var e=Object(a.useContext)(d),t=e.cart,c=e.setCart,n=e.total,s=e.orderIds,i=e.setOrderIds,r=e.itemsInLocal,m=Object(U.a)(),b=m.register,u=m.handleSubmit,O=m.watch,h=m.errors,x=O("email"),p=O("confirmEmail"),g=Object(a.useState)(!1),v=Object(o.a)(g,2),N=v[0],y=v[1],S=Object(a.useState)(!1),k=Object(o.a)(S,2),w=k[0],F=k[1],A=Object(a.useState)(),q=Object(o.a)(A,2),E=q[0],R=q[1],z=new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2}),D=Object(f.f)();Object(a.useEffect)((function(){t.length}),[t,D]);return Object(j.jsxs)("div",{className:"buy-form-container",children:[Object(j.jsx)("h1",{children:"Formulario de Compra"}),Object(j.jsxs)("form",{onSubmit:u((function(e){if(e){var a={buyer:{name:"".concat(e.name," ").concat(e.lastname),phone:e.telephone,email:e.email},items:t.map((function(e){return{id:e.id,item:e.item,price:e.price,qty:e.quantity}})),date:C.a.firestore.Timestamp.fromDate(new Date),total:n};console.log(a),console.log(t),localStorage.removeItem("cart"),console.log(t),c(r),I.collection("orders").add(a).then((function(e){var t=e.id;i([].concat(Object(l.a)(s),[{id:t}])),R(t)})).catch((function(e){F(e)})).finally((function(){!function(){var e=I.collection("items"),c=I.batch();t.forEach((function(t){c.update(e.doc(t.id),{stock:t.stock-t.quantity})})),c.commit().then((function(){console.log("Bache ok")})).catch((function(e){return console.log(e)}))}(),""!==E&&D.push("/my-orders")}))}})),className:"form-container",children:[Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("i",{className:"user icon"}),Object(j.jsx)("input",{name:"name",id:"name",type:"text",className:"validate",autoComplete:"none",ref:b({required:"Ingresar nombre",minLength:{value:2,message:"Minimo 2 caracteres"},maxLength:{value:12,message:"Maximo 12 caracteres"}})}),Object(j.jsx)("label",{htmlFor:"name",children:"Nombre"}),h.name&&Object(j.jsx)("small",{children:h.name.message})]}),Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("i",{className:"user icon"}),Object(j.jsx)("input",{name:"lastname",id:"lastname",type:"text",className:"validate",autoComplete:"none",ref:b({required:"Ingresar apellido",minLength:{value:2,message:"Minimo 2 caracteres"},maxLength:{value:12,message:"Maximo 12 caracteres"}})}),Object(j.jsx)("label",{htmlFor:"lastname",children:"Apellido"}),h.lastname&&Object(j.jsx)("small",{children:h.lastname.message})]}),Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("i",{className:"phone icon"}),Object(j.jsx)("input",{name:"telephone",id:"telephone",type:"tel",className:"validate",autoComplete:"none",ref:b({required:"Ingrese su numero",pattern:{value:/^(?:(?:00)?549?)?0?(?:11|[2368]\d)(?:(?=\d{0,2}15)\d{2})??\d{8}$/,message:"Ingrese un numero valido"}})}),Object(j.jsx)("label",{htmlFor:"telephone",children:"Telefono/Celular"}),h.telephone&&Object(j.jsx)("small",{children:h.telephone.message})]}),Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("i",{className:"mail icon"}),Object(j.jsx)("input",{name:"email",id:"email",type:"email",className:"validate",autoComplete:"none",ref:b({required:"Ingrese un email",pattern:{value:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,message:"Ingrese un email valido"}})}),Object(j.jsx)("label",{htmlFor:"email",children:"Email"}),h.email&&Object(j.jsx)("small",{children:h.email.message})]}),Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("i",{className:"mail icon"}),Object(j.jsx)("input",{name:"confirmEmail",id:"confirmEmail",type:"email",className:"validate",autoComplete:"none",ref:b({required:"Ingrese un email",pattern:{value:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,message:"Ingrese un email valido"}}),onBlur:function(){return y(p!==x)},onChange:function(){return p===x&&y(!1)}}),Object(j.jsx)("label",{htmlFor:"confirmEmail",children:"Confirmar Email"}),N&&Object(j.jsx)("small",{children:"Sus emails son diferentes"})]}),Object(j.jsxs)("div",{className:"input-field",style:{display:"none"},children:[Object(j.jsx)("i",{className:"material-icons prefix",children:"email"}),Object(j.jsx)("input",{id:"asd",type:"email",className:"validate",autoComplete:"on"}),Object(j.jsx)("label",{htmlFor:"asd",children:"Email"})]}),Object(j.jsxs)("h5",{className:"total-amount",children:["Subtotal: \xa0 ",z.format(n)]}),Object(j.jsx)("span",{}),w&&Object(j.jsx)("p",{children:w}),Object(j.jsx)("button",{disabled:p!==x,type:"submit",className:"waves-effect btn btn-buy ",children:"Finalizar compra"})]})]})}),L=c(105),Z=(c(144),function(){var e=Object(a.useContext)(d),t=e.orderIds,c=e.setOrderIds,n=Object(a.useState)([]),s=Object(o.a)(n,2),i=s[0],r=s[1];Object(a.useEffect)((function(){var e=!0;if(e){return function(e,t){var c=e.map((function(e){var t=e.id;return I.collection("orders").doc(t).get()}));Promise.all(c).then((function(e){var c=e.map((function(e){return Object(O.a)({id:e.id},e.data())}));t(c.reverse())})).catch((function(e){return console.log(e)}))}(t,r),function(){e=!1}}}),[t]);var l=function(e){return L.DateTime.fromSeconds(e)};return Object(j.jsx)("div",{className:"orders-container",children:Object(j.jsxs)("div",{className:"orders-organizer",children:[Object(j.jsx)("h3",{className:"title",children:"Mis compras"}),Object(j.jsx)("button",{className:"btn-clear",onClick:function(){localStorage.removeItem("my-orders"),c([])},children:"Borrar historial"}),Object(j.jsxs)("div",{className:"orders-columns",children:[Object(j.jsx)("p",{children:"Fecha"}),Object(j.jsx)("p",{children:"Productos"}),Object(j.jsx)("p",{children:"Codigo de pedido"}),Object(j.jsx)("p",{children:"Total"})]}),Object(j.jsx)("div",{className:"orders",children:i.length>0&&i.map((function(e){var t=e.id,c=e.total,a=e.date,n=e.items;return Object(j.jsxs)("div",{className:"order-row",children:[Object(j.jsx)("div",{className:"order-info date",children:a&&"".concat(l(a.seconds).c.day,"/").concat(l(a.seconds).c.month,"/").concat(l(a.seconds).c.year,"\n                                      ").concat(l(a.seconds).c.hour,":").concat(l(a.seconds).c.minute," ")}),Object(j.jsx)("div",{className:"order-info items",children:Object(j.jsx)("ul",{children:n&&n.map((function(e){return Object(j.jsxs)("li",{children:[" ",e.qty," x ",e.item," "]},e.id)}))})}),Object(j.jsxs)("div",{className:"order-info id ",children:[" ",t," "]}),Object(j.jsxs)("div",{className:"order-info total",children:[" $",c," "]})]},t)}))})]})})});c(145);var B=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(m,{children:Object(j.jsxs)(r.a,{children:[Object(j.jsx)(u,{}),Object(j.jsxs)(f.c,{children:[Object(j.jsx)(f.a,{path:"/",children:Object(j.jsx)(k,{})}),Object(j.jsx)(f.a,{path:"/categories/:category",children:Object(j.jsx)(S,{})}),Object(j.jsx)(f.a,{path:"/detalle/:productID",children:Object(j.jsx)(R,{})}),Object(j.jsx)(f.a,{path:"/cart",children:Object(j.jsx)(H,{})}),Object(j.jsx)(f.a,{path:"/order",children:Object(j.jsx)(T,{})}),Object(j.jsx)(f.a,{path:"/my-orders",children:Object(j.jsx)(Z,{})})]})]})})})};c(146);i.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(B,{})}),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.5af918bf.chunk.js.map